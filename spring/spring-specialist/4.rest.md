# Rest no spring
## Controller
Para definir uma classe como uma controller para rotas seguindo o REST, usamos algumas anotações.
Ex:

```java
@RestController
@RequestMapping("/cuisines")
public class CuisineController {
    @Autowired
    private CuisineRepository repository;

    @GetMapping
    List<Cuisine> list() {
        return repository.list();
    }
}
```

### @Controller vs @RestController
Quando usamos @Controlle, precisamos usar também a anotação @ResponseBody, que fará com que o retorno de um método seja incluído na resposta http. O @RestController é uma junção dessas duas anotações, então não precisamos explicitamente incluir o @ResponseBody.

### Media type
Para configurar o formato da resposta que a controller irá devolver, podemos usar o argumento `produces` na anotação de mapping (GetMapping, PutMapping etc).

```java
@GetMapping(value = "/{id}", produces = { MediaType.APPLICATION_JSON_VALUE, MediaType.APPLICATION_XML_VALUE })
Cuisine find(@PathVariable("id") Long id) {
    return repository.findById(id);
}
```

### Modificando campos da resposta
As vezes podemos querer personalizar o nome de algum campo na resposta sem ter que efetivamente mudar o nome da propriedade da nossa entity, ou seja, queremos apenas customizar um detalhe de "apresentação".

Pra isso, podemos usar a anotação @JsonProperty no atributo da entidade em questão.

```java
@Column(nullable = false)
@JsonProperty("title")
private String name;
```

No exemplo acima, o atributo se mantém `name`, mas nas conversões dessa entity para json, o atributo `name` será mostrado como `title`.

Também podemos querer que um atributo não apareça na representação em json. Nesses casos, podemos usar o `JsonIgnore`.

### Status code na resposta
Uma maneira de definir o status code da resposta é usando a anotação `@ResponseStatus`
```java
@ResponseStatus(HttpStatus.OK)
@GetMapping(value = "/{id}", produces = { MediaType.APPLICATION_JSON_VALUE, MediaType.APPLICATION_XML_VALUE })
Cuisine find(@PathVariable("id") Long id) {
    return repository.findById(id);
}
```

### Manipulando resposta
Para ter mais controle sobre a resposta, podemos retornar um `ResponseEntity`. Com isso podemos definir com mais controle o código da resposta, body etc.

Usando ele, nem precisamos da anotação `ResponseStatus`.

```java
@GetMapping(value = "/{id}", produces = { MediaType.APPLICATION_JSON_VALUE, MediaType.APPLICATION_XML_VALUE })
ResponseEntity<Cuisine> find(@PathVariable("id") Long id) {
    final var cuisine = repository.findById(id);
    return ResponseEntity.ok(cuisine);
}
```