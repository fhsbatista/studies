# Network
Como a ideia dos containers é que eles sejam isolados do host, e também entre si, por padrão eles também tem uma rede isolada. Ou seja, por exemplo, todos os containers podem expor um service na sua porta 8080.

Porém, normalmente queremos que o host consiga acessar um container, um container acesse outro container etc. Para isso, temos vários tipos de configuração de rede.

## Listando redes
`docker network ls`

## Rede bridge
É a rede padrão de um container.
Nessa rede, cada container tem um ip próprio que só o host consegue enxergar.
Um container não enxerga o outro.

### Rede bridge customizada
Conseguimos criar uma rede customizada de maneira que um container enxergue o outro.
Inclusive, o docker tem um DNS resolver, assim, conseguimos acessar containers pelo nome deles pois esse DNS resolve o nome para um ip.

Isso tudo de forma isolada. Não afeta a rede local do host.

### Criando rede
`docker network create <nomedarede>`

Ex:
`docker network create mynetwork`

### Exemplo de bridge
1. Criar uma rede customizada
`docker network create exemplorede`

2. Criar o primeiro container
`docker run -d --name db --netowrk mynetwork mongo`

3. Criar o segundo container
`docker run -d --name web --netowrk mynetwork nginx`

4. Acessar um container
`docker exec -it web bash`

5. Pingar o outro container
`ping db`

Fazendo isso, veja que o ping funcionou, ou seja, um container está se comunicando com o outro, e conseguimos fazer isso pelo nome dele.

### Exemplo Node<>MongoDB
Aqui nas anotações, na pasta `8.network/node-network`, tem uma aplicação node que aplica a rede bridge. Veja que em `index.js`, ao se conectar no mongo, na url está sendo passado o nome do container do mongo e a conexão funciona, ou seja, esse container que roda o node está conseguindo se conectar ao mongo.

