# Introdução

## Conceitos básicos
### O que são?
São aplicações comuns, mas com alguns atributos que caracterizam ser parte de uma arquitetura em microserviços.
O que as diferencia de aplicações "monolíticas", é que elas tem um escopo menor e bem definido, descentralizando o sistema e com isso trazendo várias vantagens (e também desvantagens muito consideráveis).

Obs: Não necessariamente eles são "pequenos". É difícil acertar o tamanho dele logo no início. Então o que normalmente acontece é que eles começam grandes ou vão ficando grandes com o tempo, e então é comum quebrá-los em serviços menores.
Ex: No nubank, um microserviço de "contas" acabou ficando muito grande, e então iniciaram um trabalho pra diminuir ele (fonte podcast alura).

### Ecossitema
Os microserviços normalmente fazem parte de um ecosistema de vários microserviços. Eles não estão isolados, até porque se estivessem, provavelmente não seria um microserviço.

Eles normalmente, por terem objetivos muito bem definidos, não são o suficiente para atingir os objetivos do negócio, então eles se comunicam para poder atingir os objetivos.

### Autonomia
A ideia é que os microserviços sejam autonômos, ou seja, não precisem de outros para cumprir seus objetivos. Isso é um detalhe bastante complicado pois os serviços presicam se comunicar, gerando assim dependências. Apesar de difícil atingir isso, é preciso pensar na arquitetura de maneira a permitir essa autonomia e evitar as dependências, pois do contrário, o sistema acaba virando um monolito espalhado, assim tento o pior dos mundos, pois teremos as desvantagens de microserviços sem usufruir da vantagem deles, que depende justamente da autonomia deles.

É comum que, para garantir a autonomia, o microserviço acabe sendo bastante limitado, pequeno.

### Comunicação
Normalmente, o output de um microserviço é o input de outro. Como os microserviços tendem a ser pequenos, eles acabam se comunicando o tempo todo para atingir os objetivos do negócio.

### Bancos de dados
Microserviços precisam ter bancos de dados independentes. Quando eles compartilham um mesmo banco de dados, isso deveria ser apenas um momento de transição em que a equipe está trabalhando para separar esse banco de dados.

Os bancos precisam ser exclusivos para os microserviços pois, do contrário, esse acoplamento dos microserviços aos bancos podem causar grandes dores de cabeça de escalabilidade e também de manutenção, pois normalemnte, microserviços diferentes são cuidados por equipes diferentes, e equipes diferentes mexendo no mesmo banco de dados pode trazer vários problemas pois equipes diferentes não tem o mesmo nível de comunicação que dentro da equipe, então coisas como migrations podem se tornar um pesadelo.


## Microserviços vs Monolitos
### Objetivo / Domínio
Monolítos: Todo o domínio e objetivos do negócio estão no escopo do monolito

Microserviços: os objetivos e domínio estão espalhados em serviços especializados

### Linguagens de programacao
Monolitos: Normalmente é usada uma só linguagem, ou então, apenas as linguagens suportadas em conjunto na tecnologia que está sendo usada (ex: uma aplicação java poderia ter kotlin também).

Microserviços: cada serviço pode usar uma linguagem distinta. Isso permite usar a melhor linguagem para o objetivo daquele serviço em específico. Por exemplo, onde precisarmos de muita performance podemos trabalhar com Go, e num outro que é só crud podemos usar rails ou java.

### Deploy
Monolitos: Todo o sistema é deployado de uma vez. Isso pode ser arriscado, pois se o depay falha por algo de um módulo específico, todo o sistema cai, mesmo aqueles que talvez não tivesse nada a ver com o módulo que falhou.

Microserviços: Idealmente teria um deploy separado pra cada serviço, o que diminui muito o risco de todo o sistema falhar ao mesmo tempo.

### Times
Monolitos: Separar o trabalho em diversas equipes pode ser mais complicado, pois todos estariam mexendo no mesmo código.

Microserviços: Podemos ter uma equipe pra cada serviço, ou alguns serviços por equipe, o que importa é que é possível delegar objetivos diferentes do sistema para diferentes equipes/pessoas.

### Início de projetos
Monolitos: O natural é se começar com um monilito, pois isso permite aprender mais sobre o negócio primeiro, para então ter mais domínio sobre ele e poder quebrar em microerviços com mais precisão posteriormente.

Microserviços: É necessário um certo domínio sobre o negócio para poder definir quais serão os serviços. Por isso, não é muito comum já iniciar um projeto pensando em microserviços. Quando se te tenta isso, corre-se um risco muito grande que definir errado os microserviços e isso dar muita dor de cabeça depois.
